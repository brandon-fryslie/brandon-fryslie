<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 260" width="800" height="260">
  <defs>
    <!-- Gradients for lanes -->
    <linearGradient id="client-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4a90e2"/>
      <stop offset="100%" style="stop-color:#2a5080"/>
    </linearGradient>

    <linearGradient id="proxy-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e67e22"/>
      <stop offset="100%" style="stop-color:#c65a0a"/>
    </linearGradient>

    <linearGradient id="api-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6"/>
      <stop offset="100%" style="stop-color:#6a3a86"/>
    </linearGradient>

    <!-- Glow filter -->
    <filter id="glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Diff marker glow -->
    <filter id="diff-glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="800" height="260" fill="#0a0a14"/>

  <!-- Three vertical lanes -->
  <g id="lanes">
    <!-- CLIENT lane -->
    <rect x="80" y="40" width="160" height="180" rx="6" fill="#1a2a3a" stroke="#4a90e2" stroke-width="2" opacity="0.3"/>
    <text x="160" y="65" font-family="monospace" font-size="14" fill="#4a90e2" text-anchor="middle" font-weight="bold">CLIENT</text>

    <!-- PROXY lane (emphasized) -->
    <rect x="320" y="40" width="160" height="180" rx="6" fill="#2a1a0a" stroke="#e67e22" stroke-width="2" opacity="0.4"/>
    <text x="400" y="65" font-family="monospace" font-size="14" fill="#e67e22" text-anchor="middle" font-weight="bold">PROXY</text>

    <!-- API lane -->
    <rect x="560" y="40" width="160" height="180" rx="6" fill="#1a0a2a" stroke="#9b59b6" stroke-width="2" opacity="0.3"/>
    <text x="640" y="65" font-family="monospace" font-size="14" fill="#9b59b6" text-anchor="middle" font-weight="bold">API</text>
  </g>

  <!-- Request packet: CLIENT → PROXY -->
  <rect x="0" y="100" width="40" height="20" rx="3" fill="#4a90e2" opacity="0.7" filter="url(#glow)">
    <animate attributeName="x" values="140;360" dur="7s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.8;0.8;0" keyTimes="0;0.2;0.7;1" dur="7s" repeatCount="indefinite"/>
  </rect>
  <text x="20" y="115" font-family="monospace" font-size="8" fill="#ffffff" opacity="0">
    REQ
    <animate attributeName="x" values="160;380" dur="7s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;1;1;0" keyTimes="0;0.2;0.7;1" dur="7s" repeatCount="indefinite"/>
  </text>

  <!-- Request packet: PROXY → API -->
  <rect x="0" y="100" width="40" height="20" rx="3" fill="#9b59b6" opacity="0.7" filter="url(#glow)">
    <animate attributeName="x" values="440;600" dur="11s" begin="2s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.8;0.8;0" keyTimes="0;0.2;0.7;1" dur="11s" begin="2s" repeatCount="indefinite"/>
  </rect>
  <text x="20" y="115" font-family="monospace" font-size="8" fill="#ffffff" opacity="0">
    REQ
    <animate attributeName="x" values="460;620" dur="11s" begin="2s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;1;1;0" keyTimes="0;0.2;0.7;1" dur="11s" begin="2s" repeatCount="indefinite"/>
  </text>

  <!-- Response packet: API → PROXY -->
  <rect x="0" y="140" width="40" height="20" rx="3" fill="#9b59b6" opacity="0.7" filter="url(#glow)">
    <animate attributeName="x" values="600;440" dur="13s" begin="4s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.8;0.8;0" keyTimes="0;0.2;0.7;1" dur="13s" begin="4s" repeatCount="indefinite"/>
  </rect>
  <text x="20" y="155" font-family="monospace" font-size="8" fill="#ffffff" opacity="0">
    RES
    <animate attributeName="x" values="620;460" dur="13s" begin="4s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;1;1;0" keyTimes="0;0.2;0.7;1" dur="13s" begin="4s" repeatCount="indefinite"/>
  </text>

  <!-- Response packet: PROXY → CLIENT -->
  <rect x="0" y="140" width="40" height="20" rx="3" fill="#4a90e2" opacity="0.7" filter="url(#glow)">
    <animate attributeName="x" values="360;140" dur="17s" begin="6s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.8;0.8;0" keyTimes="0;0.2;0.7;1" dur="17s" begin="6s" repeatCount="indefinite"/>
  </rect>
  <text x="20" y="155" font-family="monospace" font-size="8" fill="#ffffff" opacity="0">
    RES
    <animate attributeName="x" values="380;160" dur="17s" begin="6s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;1;1;0" keyTimes="0;0.2;0.7;1" dur="17s" begin="6s" repeatCount="indefinite"/>
  </text>

  <!-- Secondary traffic (smaller, faster packets) -->
  <rect x="0" y="120" width="30" height="15" rx="2" fill="#6ab0f2" opacity="0.5">
    <animate attributeName="x" values="140;360" dur="11s" begin="3s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.6;0.6;0" keyTimes="0;0.2;0.7;1" dur="11s" begin="3s" repeatCount="indefinite"/>
  </rect>

  <rect x="0" y="120" width="30" height="15" rx="2" fill="#b87fc6" opacity="0.5">
    <animate attributeName="x" values="440;600" dur="13s" begin="5s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.6;0.6;0" keyTimes="0;0.2;0.7;1" dur="13s" begin="5s" repeatCount="indefinite"/>
  </rect>

  <!-- PROXY lane: Diff markers appearing -->
  <g id="diff-markers">
    <!-- Added line (green +) -->
    <text x="340" y="110" font-family="monospace" font-size="16" fill="#00ff41" opacity="0" filter="url(#diff-glow)">
      +
      <animate attributeName="opacity" values="0;1;1;0.3" keyTimes="0;0.3;0.7;1" dur="19s" begin="3s" repeatCount="indefinite"/>
    </text>

    <!-- Removed line (red -) -->
    <text x="360" y="130" font-family="monospace" font-size="16" fill="#ff5555" opacity="0" filter="url(#diff-glow)">
      −
      <animate attributeName="opacity" values="0;1;1;0.3" keyTimes="0;0.3;0.7;1" dur="19s" begin="4s" repeatCount="indefinite"/>
    </text>

    <!-- Added line (green +) -->
    <text x="380" y="150" font-family="monospace" font-size="16" fill="#00ff41" opacity="0" filter="url(#diff-glow)">
      +
      <animate attributeName="opacity" values="0;1;1;0.3" keyTimes="0;0.3;0.7;1" dur="19s" begin="5s" repeatCount="indefinite"/>
    </text>

    <!-- Modified line (yellow ~) -->
    <text x="400" y="170" font-family="monospace" font-size="16" fill="#ffaa00" opacity="0" filter="url(#diff-glow)">
      ~
      <animate attributeName="opacity" values="0;1;1;0.3" keyTimes="0;0.3;0.7;1" dur="19s" begin="6s" repeatCount="indefinite"/>
    </text>

    <!-- Added line (green +) -->
    <text x="420" y="190" font-family="monospace" font-size="16" fill="#00ff41" opacity="0" filter="url(#diff-glow)">
      +
      <animate attributeName="opacity" values="0;1;1;0.3" keyTimes="0;0.3;0.7;1" dur="19s" begin="7s" repeatCount="indefinite"/>
    </text>
  </g>

  <!-- Inspection visualization (magnifying glass effect over proxy) -->
  <circle cx="400" cy="140" r="40" fill="none" stroke="#e67e22" stroke-width="2" opacity="0">
    <animate attributeName="opacity" values="0;0.4;0" dur="23s" begin="3s" repeatCount="indefinite"/>
    <animate attributeName="r" values="30;50;30" dur="23s" begin="3s" repeatCount="indefinite"/>
  </circle>

  <!-- Data flow arrows -->
  <g opacity="0.4">
    <!-- CLIENT → PROXY arrow -->
    <polygon points="250,130 260,125 260,135" fill="#4a90e2"/>
    <!-- PROXY → API arrow -->
    <polygon points="490,130 500,125 500,135" fill="#9b59b6"/>
  </g>

  <!-- Labels -->
  <text x="400" y="25" font-family="monospace" font-size="12" fill="#e67e22" text-anchor="middle" opacity="0.8">HTTP PROXY INTERCEPTION</text>
  <text x="30" y="250" font-family="monospace" font-size="10" fill="#4a4a5f" opacity="0.6">ANTHROPIC API</text>
  <text x="770" y="250" font-family="monospace" font-size="10" fill="#4a4a5f" opacity="0.6" text-anchor="end">UNIFIED DIFF</text>

  <!-- Connection state labels -->
  <text x="160" y="235" font-family="monospace" font-size="8" fill="#4a90e2" text-anchor="middle" opacity="0.5">Claude Code</text>
  <text x="400" y="235" font-family="monospace" font-size="8" fill="#e67e22" text-anchor="middle" opacity="0.5">cc-dump</text>
  <text x="640" y="235" font-family="monospace" font-size="8" fill="#9b59b6" text-anchor="middle" opacity="0.5">claude.ai</text>
</svg>
