<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 240" width="800" height="240">
  <defs>
    <!-- Gradient for data flow -->
    <linearGradient id="flow-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4a90e2;stop-opacity:1"/>
      <stop offset="33%" style="stop-color:#9b59b6;stop-opacity:1"/>
      <stop offset="66%" style="stop-color:#e67e22;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#f39c12;stop-opacity:1"/>
    </linearGradient>

    <!-- Glow filter -->
    <filter id="stage-glow">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Pulse animation for stage borders -->
    <filter id="pulse-glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="800" height="240" fill="#0f0f1a"/>

  <!-- Connecting lines between stages -->
  <line x1="140" y1="120" x2="240" y2="120" stroke="#2a2a3f" stroke-width="2"/>
  <line x1="360" y1="120" x2="460" y2="120" stroke="#2a2a3f" stroke-width="2"/>
  <line x1="580" y1="120" x2="680" y2="120" stroke="#2a2a3f" stroke-width="2"/>

  <!-- Stage 1: PARSE (cool blue) -->
  <rect x="40" y="80" width="100" height="80" rx="8" fill="#1a2332" stroke="#4a90e2" stroke-width="2" filter="url(#stage-glow)">
    <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="7s" repeatCount="indefinite"/>
  </rect>
  <text x="90" y="110" font-family="monospace" font-size="14" fill="#4a90e2" text-anchor="middle" font-weight="bold">PARSE</text>

  <!-- Parse stage internal animation (spinning gear) -->
  <g transform="translate(90, 135)" opacity="0.6">
    <circle r="12" fill="none" stroke="#4a90e2" stroke-width="1.5"/>
    <line x1="-8" y1="0" x2="8" y2="0" stroke="#4a90e2" stroke-width="1.5">
      <animateTransform attributeName="transform" type="rotate" from="0" to="360" dur="11s" repeatCount="indefinite"/>
    </line>
    <line x1="0" y1="-8" x2="0" y2="8" stroke="#4a90e2" stroke-width="1.5">
      <animateTransform attributeName="transform" type="rotate" from="0" to="360" dur="11s" repeatCount="indefinite"/>
    </line>
  </g>

  <!-- Stage 2: VALIDATE (purple) -->
  <rect x="240" y="80" width="120" height="80" rx="8" fill="#241a32" stroke="#9b59b6" stroke-width="2" filter="url(#stage-glow)">
    <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="13s" begin="2s" repeatCount="indefinite"/>
  </rect>
  <text x="300" y="110" font-family="monospace" font-size="14" fill="#9b59b6" text-anchor="middle" font-weight="bold">VALIDATE</text>

  <!-- Validate stage internal animation (pulsing border) -->
  <rect x="248" y="88" width="104" height="64" rx="6" fill="none" stroke="#9b59b6" stroke-width="1" opacity="0.4">
    <animate attributeName="opacity" values="0.2;0.7;0.2" dur="7s" begin="1s" repeatCount="indefinite"/>
  </rect>

  <!-- Stage 3: OPTIMIZE (orange) -->
  <rect x="460" y="80" width="120" height="80" rx="8" fill="#322418" stroke="#e67e22" stroke-width="2" filter="url(#stage-glow)">
    <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="17s" begin="4s" repeatCount="indefinite"/>
  </rect>
  <text x="520" y="110" font-family="monospace" font-size="14" fill="#e67e22" text-anchor="middle" font-weight="bold">OPTIMIZE</text>

  <!-- Optimize stage internal animation (arrows converging) -->
  <g opacity="0.5">
    <line x1="475" y1="135" x2="505" y2="135" stroke="#e67e22" stroke-width="1.5">
      <animate attributeName="x1" values="475;485;475" dur="13s" repeatCount="indefinite"/>
    </line>
    <line x1="535" y1="135" x2="565" y2="135" stroke="#e67e22" stroke-width="1.5">
      <animate attributeName="x2" values="565;555;565" dur="13s" repeatCount="indefinite"/>
    </line>
  </g>

  <!-- Stage 4: EMIT (golden) -->
  <rect x="680" y="80" width="100" height="80" rx="8" fill="#322a18" stroke="#f39c12" stroke-width="2" filter="url(#stage-glow)">
    <animate attributeName="stroke-opacity" values="0.5;1;0.5" dur="11s" begin="6s" repeatCount="indefinite"/>
  </rect>
  <text x="730" y="110" font-family="monospace" font-size="14" fill="#f39c12" text-anchor="middle" font-weight="bold">EMIT</text>

  <!-- Emit stage internal animation (output arrows) -->
  <g opacity="0.6">
    <polygon points="730,130 740,135 730,140" fill="#f39c12">
      <animate attributeName="opacity" values="0.3;1;0.3" dur="7s" begin="3s" repeatCount="indefinite"/>
    </polygon>
  </g>

  <!-- Data flow pulses (traveling dots) -->
  <!-- Flow 1: PARSE to VALIDATE -->
  <circle r="4" fill="#4a90e2" filter="url(#stage-glow)">
    <animate attributeName="cx" values="140;240" dur="11s" repeatCount="indefinite"/>
    <animate attributeName="cy" values="120;120" dur="11s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;1;1;0" keyTimes="0;0.2;0.8;1" dur="11s" repeatCount="indefinite"/>
  </circle>

  <!-- Flow 2: VALIDATE to OPTIMIZE -->
  <circle r="4" fill="#9b59b6" filter="url(#stage-glow)">
    <animate attributeName="cx" values="360;460" dur="13s" begin="3s" repeatCount="indefinite"/>
    <animate attributeName="cy" values="120;120" dur="13s" begin="3s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;1;1;0" keyTimes="0;0.2;0.8;1" dur="13s" begin="3s" repeatCount="indefinite"/>
  </circle>

  <!-- Flow 3: OPTIMIZE to EMIT -->
  <circle r="4" fill="#e67e22" filter="url(#stage-glow)">
    <animate attributeName="cx" values="580;680" dur="17s" begin="6s" repeatCount="indefinite"/>
    <animate attributeName="cy" values="120;120" dur="17s" begin="6s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;1;1;0" keyTimes="0;0.2;0.8;1" dur="17s" begin="6s" repeatCount="indefinite"/>
  </circle>

  <!-- Additional traveling pulses (smaller, faster) -->
  <circle r="2" fill="#6ab0f2" opacity="0.7">
    <animate attributeName="cx" values="140;240" dur="7s" begin="2s" repeatCount="indefinite"/>
    <animate attributeName="cy" values="120;120" dur="7s" begin="2s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.7;0.7;0" keyTimes="0;0.2;0.8;1" dur="7s" begin="2s" repeatCount="indefinite"/>
  </circle>

  <circle r="2" fill="#b87fc6" opacity="0.7">
    <animate attributeName="cx" values="360;460" dur="19s" begin="1s" repeatCount="indefinite"/>
    <animate attributeName="cy" values="120;120" dur="19s" begin="1s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.7;0.7;0" keyTimes="0;0.2;0.8;1" dur="19s" begin="1s" repeatCount="indefinite"/>
  </circle>

  <circle r="2" fill="#ea9652" opacity="0.7">
    <animate attributeName="cx" values="580;680" dur="23s" begin="4s" repeatCount="indefinite"/>
    <animate attributeName="cy" values="120;120" dur="23s" begin="4s" repeatCount="indefinite"/>
    <animate attributeName="opacity" values="0;0.7;0.7;0" keyTimes="0;0.2;0.8;1" dur="23s" begin="4s" repeatCount="indefinite"/>
  </circle>

  <!-- Labels -->
  <text x="400" y="30" font-family="monospace" font-size="12" fill="#4a4a5f" text-anchor="middle" opacity="0.8">COMPILER PIPELINE</text>
  <text x="30" y="220" font-family="monospace" font-size="10" fill="#4a4a5f" opacity="0.6">SOURCE</text>
  <text x="730" y="220" font-family="monospace" font-size="10" fill="#4a4a5f" opacity="0.6">OUTPUT</text>
</svg>
